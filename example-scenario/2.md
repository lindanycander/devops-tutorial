# Setting up the model

You should now see 2 files in the `iris` directory: `train.py` that trains a RandomForest model with the Iris dataset, and `app.py` that sets up the web API via FastAPI. You can use your preferred text editor to see how the code works.

### 1. Run `pip install scikit-learn fastapi uvicorn joblib` to install dependencies.

- scikit-learn: training the model.
- fastapi: creating a web API.
- uvicorn: running the web API as a web server.
- joblib: saving and loading trained models.

### 2. Run `python train.py` to train the model.

We expect this output: `Model trained and saved as iris_model.pkl`

### 3. Run `uvicorn app:app --host 0.0.0.0 --port 8000` to start the server.

Since we need this session to keep running, we'll need to create a new terminal window. Do this by pressing the hamburger menu button in the top right corner and selecting "new terminal window".

### 4. Run `curl http://localhost:8000/` in the new terminal to verify connection.

We expect this output: `{"message":"Iris model API is running!"}`

### 5. Run `curl -X POST "http://localhost:8000/predict?sepal_length=5.1&sepal_width=3.5&petal_length=1.4&petal_width=0.2"` to get a prediction from the model.

We're sending in measurements of a flower and letting it predict what kind of flower it is. It should produce this output: `{"prediction":0,"name":"setosa"}`.

### Bonus: `curl http://localhost:8000/<SECRET>`

If you can find what `<SECRET>` is, you'll get a response in the format of `{"secret": <SOME_MESSAGE>}`. Try looking in the code...
